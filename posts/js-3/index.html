<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>JavaScript: Promise v√† Async/Await | Blog Ti·∫øn Ph∆∞·ªõc</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Gi·ªõi thi·ªáu v·ªÅ Promise v√† Async/Await
JavaScript l√† ng√¥n ng·ªØ ƒë∆°n lu·ªìng (single-threaded), nh∆∞ng v·ªõi Promise v√† Async/Await, ch√∫ng ta c√≥ th·ªÉ x·ª≠ l√Ω c√°c t√°c v·ª• b·∫•t ƒë·ªìng b·ªô m·ªôt c√°ch hi·ªáu qu·∫£ m√† kh√¥ng b·ªã ch·∫∑n lu·ªìng ch√≠nh.
Promise c∆° b·∫£n
Promise l√† m·ªôt object ƒë·∫°i di·ªán cho k·∫øt qu·∫£ c·ªßa m·ªôt t√°c v·ª• b·∫•t ƒë·ªìng b·ªô. N√≥ c√≥ th·ªÉ ·ªü m·ªôt trong ba tr·∫°ng th√°i:

Pending: ƒêang ch·ªù x·ª≠ l√Ω
Fulfilled: ƒê√£ ho√†n th√†nh th√†nh c√¥ng
Rejected: ƒê√£ th·∫•t b·∫°i

C√∫ ph√°p t·∫°o Promise
const myPromise = new Promise((resolve, reject) =&gt; {
    // T√°c v·ª• b·∫•t ƒë·ªìng b·ªô
    const success = true; // Gi·∫£ l·∫≠p k·∫øt qu·∫£
    
    if (success) {
        resolve(&#34;T√°c v·ª• ho√†n th√†nh th√†nh c√¥ng!&#34;);
    } else {
        reject(&#34;T√°c v·ª• th·∫•t b·∫°i!&#34;);
    }
});
S·ª≠ d·ª•ng Promise
myPromise
    .then(result =&gt; {
        console.log(&#34;Th√†nh c√¥ng:&#34;, result);
    })
    .catch(error =&gt; {
        console.log(&#34;L·ªói:&#34;, error);
    })
    .finally(() =&gt; {
        console.log(&#34;Promise ƒë√£ ho√†n th√†nh&#34;);
    });
V√≠ d·ª• 1: Promise c∆° b·∫£n
// H√†m gi·∫£ l·∫≠p API call
function fetchUserData(userId) {
    return new Promise((resolve, reject) =&gt; {
        // Gi·∫£ l·∫≠p delay
        setTimeout(() =&gt; {
            if (userId &gt; 0) {
                resolve({
                    id: userId,
                    name: `User ${userId}`,
                    email: `user${userId}@example.com`
                });
            } else {
                reject(new Error(&#34;Invalid user ID&#34;));
            }
        }, 1000);
    });
}

// S·ª≠ d·ª•ng Promise
fetchUserData(1)
    .then(user =&gt; {
        console.log(&#34;User data:&#34;, user);
        return user.name; // Tr·∫£ v·ªÅ gi√° tr·ªã cho .then() ti·∫øp theo
    })
    .then(name =&gt; {
        console.log(&#34;User name:&#34;, name);
    })
    .catch(error =&gt; {
        console.error(&#34;Error:&#34;, error.message);
    });

// Test v·ªõi ID kh√¥ng h·ª£p l·ªá
fetchUserData(-1)
    .then(user =&gt; {
        console.log(&#34;User data:&#34;, user);
    })
    .catch(error =&gt; {
        console.error(&#34;Error:&#34;, error.message); // Invalid user ID
    });
V√≠ d·ª• 2: Promise Chain
// H√†m gi·∫£ l·∫≠p c√°c API calls
function fetchUser(userId) {
    return new Promise((resolve) =&gt; {
        setTimeout(() =&gt; {
            resolve({ id: userId, name: `User ${userId}` });
        }, 500);
    });
}

function fetchUserPosts(userId) {
    return new Promise((resolve) =&gt; {
        setTimeout(() =&gt; {
            resolve([
                { id: 1, title: &#34;Post 1&#34;, userId: userId },
                { id: 2, title: &#34;Post 2&#34;, userId: userId }
            ]);
        }, 300);
    });
}

function fetchUserComments(userId) {
    return new Promise((resolve) =&gt; {
        setTimeout(() =&gt; {
            resolve([
                { id: 1, text: &#34;Comment 1&#34;, userId: userId },
                { id: 2, text: &#34;Comment 2&#34;, userId: userId }
            ]);
        }, 200);
    });
}

// Promise chain
fetchUser(1)
    .then(user =&gt; {
        console.log(&#34;User:&#34;, user);
        return fetchUserPosts(user.id);
    })
    .then(posts =&gt; {
        console.log(&#34;Posts:&#34;, posts);
        return fetchUserComments(1);
    })
    .then(comments =&gt; {
        console.log(&#34;Comments:&#34;, comments);
    })
    .catch(error =&gt; {
        console.error(&#34;Error in chain:&#34;, error);
    });
Promise.all() - Ch·∫°y song song
// Ch·∫°y nhi·ªÅu Promise song song
Promise.all([
    fetchUser(1),
    fetchUser(2),
    fetchUser(3)
])
.then(users =&gt; {
    console.log(&#34;All users:&#34;, users);
})
.catch(error =&gt; {
    console.error(&#34;Error fetching users:&#34;, error);
});

// V√≠ d·ª• v·ªõi th·ªùi gian kh√°c nhau
function delayedPromise(value, delay) {
    return new Promise(resolve =&gt; {
        setTimeout(() =&gt; resolve(value), delay);
    });
}

console.time(&#34;Promise.all&#34;);
Promise.all([
    delayedPromise(&#34;A&#34;, 1000),
    delayedPromise(&#34;B&#34;, 500),
    delayedPromise(&#34;C&#34;, 1500)
])
.then(results =&gt; {
    console.timeEnd(&#34;Promise.all&#34;); // ~1500ms (th·ªùi gian c·ªßa Promise ch·∫≠m nh·∫•t)
    console.log(&#34;Results:&#34;, results); // [&#34;A&#34;, &#34;B&#34;, &#34;C&#34;]
});
Promise.race() - L·∫•y k·∫øt qu·∫£ nhanh nh·∫•t
// L·∫•y k·∫øt qu·∫£ c·ªßa Promise ho√†n th√†nh ƒë·∫ßu ti√™n
function timeoutPromise(ms) {
    return new Promise((_, reject) =&gt; {
        setTimeout(() =&gt; reject(new Error(&#34;Timeout&#34;)), ms);
    });
}

function fetchWithTimeout(url, timeout = 5000) {
    return Promise.race([
        fetch(url),
        timeoutPromise(timeout)
    ]);
}

// V√≠ d·ª• s·ª≠ d·ª•ng
fetchWithTimeout(&#34;https://api.example.com/data&#34;, 3000)
    .then(response =&gt; response.json())
    .then(data =&gt; console.log(&#34;Data:&#34;, data))
    .catch(error =&gt; console.error(&#34;Error:&#34;, error.message));
Async/Await - C√∫ ph√°p hi·ªán ƒë·∫°i
Async/Await l√† c√∫ ph√°p sugar cho Promise, gi√∫p code d·ªÖ ƒë·ªçc v√† vi·∫øt h∆°n.">
    <meta name="generator" content="Hugo 0.151.2">
    
    
    
      <meta name="robots" content="index, follow">
    
    <meta name="author" content="Nguy·ªÖn Ti·∫øn Ph∆∞·ªõc">
    

    
<link rel="stylesheet" href="/blogphuoc.github.io/ananke/css/main.min.35b2896b31743d661fd733de1ee2155d455ab40db1eab0652f3e9f3140728b69.css" >




    


    
      

    

    

    
      <link rel="canonical" href="https://phuoc0209.github.io/blogphuoc.github.io/posts/js-3/">
    

    <meta property="og:url" content="https://phuoc0209.github.io/blogphuoc.github.io/posts/js-3/">
  <meta property="og:site_name" content="Blog Ti·∫øn Ph∆∞·ªõc">
  <meta property="og:title" content="JavaScript: Promise v√† Async/Await">
  <meta property="og:description" content="Gi·ªõi thi·ªáu v·ªÅ Promise v√† Async/Await JavaScript l√† ng√¥n ng·ªØ ƒë∆°n lu·ªìng (single-threaded), nh∆∞ng v·ªõi Promise v√† Async/Await, ch√∫ng ta c√≥ th·ªÉ x·ª≠ l√Ω c√°c t√°c v·ª• b·∫•t ƒë·ªìng b·ªô m·ªôt c√°ch hi·ªáu qu·∫£ m√† kh√¥ng b·ªã ch·∫∑n lu·ªìng ch√≠nh.
Promise c∆° b·∫£n Promise l√† m·ªôt object ƒë·∫°i di·ªán cho k·∫øt qu·∫£ c·ªßa m·ªôt t√°c v·ª• b·∫•t ƒë·ªìng b·ªô. N√≥ c√≥ th·ªÉ ·ªü m·ªôt trong ba tr·∫°ng th√°i:
Pending: ƒêang ch·ªù x·ª≠ l√Ω Fulfilled: ƒê√£ ho√†n th√†nh th√†nh c√¥ng Rejected: ƒê√£ th·∫•t b·∫°i C√∫ ph√°p t·∫°o Promise const myPromise = new Promise((resolve, reject) =&gt; { // T√°c v·ª• b·∫•t ƒë·ªìng b·ªô const success = true; // Gi·∫£ l·∫≠p k·∫øt qu·∫£ if (success) { resolve(&#34;T√°c v·ª• ho√†n th√†nh th√†nh c√¥ng!&#34;); } else { reject(&#34;T√°c v·ª• th·∫•t b·∫°i!&#34;); } }); S·ª≠ d·ª•ng Promise myPromise .then(result =&gt; { console.log(&#34;Th√†nh c√¥ng:&#34;, result); }) .catch(error =&gt; { console.log(&#34;L·ªói:&#34;, error); }) .finally(() =&gt; { console.log(&#34;Promise ƒë√£ ho√†n th√†nh&#34;); }); V√≠ d·ª• 1: Promise c∆° b·∫£n // H√†m gi·∫£ l·∫≠p API call function fetchUserData(userId) { return new Promise((resolve, reject) =&gt; { // Gi·∫£ l·∫≠p delay setTimeout(() =&gt; { if (userId &gt; 0) { resolve({ id: userId, name: `User ${userId}`, email: `user${userId}@example.com` }); } else { reject(new Error(&#34;Invalid user ID&#34;)); } }, 1000); }); } // S·ª≠ d·ª•ng Promise fetchUserData(1) .then(user =&gt; { console.log(&#34;User data:&#34;, user); return user.name; // Tr·∫£ v·ªÅ gi√° tr·ªã cho .then() ti·∫øp theo }) .then(name =&gt; { console.log(&#34;User name:&#34;, name); }) .catch(error =&gt; { console.error(&#34;Error:&#34;, error.message); }); // Test v·ªõi ID kh√¥ng h·ª£p l·ªá fetchUserData(-1) .then(user =&gt; { console.log(&#34;User data:&#34;, user); }) .catch(error =&gt; { console.error(&#34;Error:&#34;, error.message); // Invalid user ID }); V√≠ d·ª• 2: Promise Chain // H√†m gi·∫£ l·∫≠p c√°c API calls function fetchUser(userId) { return new Promise((resolve) =&gt; { setTimeout(() =&gt; { resolve({ id: userId, name: `User ${userId}` }); }, 500); }); } function fetchUserPosts(userId) { return new Promise((resolve) =&gt; { setTimeout(() =&gt; { resolve([ { id: 1, title: &#34;Post 1&#34;, userId: userId }, { id: 2, title: &#34;Post 2&#34;, userId: userId } ]); }, 300); }); } function fetchUserComments(userId) { return new Promise((resolve) =&gt; { setTimeout(() =&gt; { resolve([ { id: 1, text: &#34;Comment 1&#34;, userId: userId }, { id: 2, text: &#34;Comment 2&#34;, userId: userId } ]); }, 200); }); } // Promise chain fetchUser(1) .then(user =&gt; { console.log(&#34;User:&#34;, user); return fetchUserPosts(user.id); }) .then(posts =&gt; { console.log(&#34;Posts:&#34;, posts); return fetchUserComments(1); }) .then(comments =&gt; { console.log(&#34;Comments:&#34;, comments); }) .catch(error =&gt; { console.error(&#34;Error in chain:&#34;, error); }); Promise.all() - Ch·∫°y song song // Ch·∫°y nhi·ªÅu Promise song song Promise.all([ fetchUser(1), fetchUser(2), fetchUser(3) ]) .then(users =&gt; { console.log(&#34;All users:&#34;, users); }) .catch(error =&gt; { console.error(&#34;Error fetching users:&#34;, error); }); // V√≠ d·ª• v·ªõi th·ªùi gian kh√°c nhau function delayedPromise(value, delay) { return new Promise(resolve =&gt; { setTimeout(() =&gt; resolve(value), delay); }); } console.time(&#34;Promise.all&#34;); Promise.all([ delayedPromise(&#34;A&#34;, 1000), delayedPromise(&#34;B&#34;, 500), delayedPromise(&#34;C&#34;, 1500) ]) .then(results =&gt; { console.timeEnd(&#34;Promise.all&#34;); // ~1500ms (th·ªùi gian c·ªßa Promise ch·∫≠m nh·∫•t) console.log(&#34;Results:&#34;, results); // [&#34;A&#34;, &#34;B&#34;, &#34;C&#34;] }); Promise.race() - L·∫•y k·∫øt qu·∫£ nhanh nh·∫•t // L·∫•y k·∫øt qu·∫£ c·ªßa Promise ho√†n th√†nh ƒë·∫ßu ti√™n function timeoutPromise(ms) { return new Promise((_, reject) =&gt; { setTimeout(() =&gt; reject(new Error(&#34;Timeout&#34;)), ms); }); } function fetchWithTimeout(url, timeout = 5000) { return Promise.race([ fetch(url), timeoutPromise(timeout) ]); } // V√≠ d·ª• s·ª≠ d·ª•ng fetchWithTimeout(&#34;https://api.example.com/data&#34;, 3000) .then(response =&gt; response.json()) .then(data =&gt; console.log(&#34;Data:&#34;, data)) .catch(error =&gt; console.error(&#34;Error:&#34;, error.message)); Async/Await - C√∫ ph√°p hi·ªán ƒë·∫°i Async/Await l√† c√∫ ph√°p sugar cho Promise, gi√∫p code d·ªÖ ƒë·ªçc v√† vi·∫øt h∆°n.">
  <meta property="og:locale" content="vi">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-10-17T10:20:00+07:00">
    <meta property="article:modified_time" content="2025-10-17T10:20:00+07:00">
    <meta property="article:tag" content="Promise">
    <meta property="article:tag" content="Async">
    <meta property="article:tag" content="Await">
    <meta property="article:tag" content="Javascript">

  <meta itemprop="name" content="JavaScript: Promise v√† Async/Await">
  <meta itemprop="description" content="Gi·ªõi thi·ªáu v·ªÅ Promise v√† Async/Await JavaScript l√† ng√¥n ng·ªØ ƒë∆°n lu·ªìng (single-threaded), nh∆∞ng v·ªõi Promise v√† Async/Await, ch√∫ng ta c√≥ th·ªÉ x·ª≠ l√Ω c√°c t√°c v·ª• b·∫•t ƒë·ªìng b·ªô m·ªôt c√°ch hi·ªáu qu·∫£ m√† kh√¥ng b·ªã ch·∫∑n lu·ªìng ch√≠nh.
Promise c∆° b·∫£n Promise l√† m·ªôt object ƒë·∫°i di·ªán cho k·∫øt qu·∫£ c·ªßa m·ªôt t√°c v·ª• b·∫•t ƒë·ªìng b·ªô. N√≥ c√≥ th·ªÉ ·ªü m·ªôt trong ba tr·∫°ng th√°i:
Pending: ƒêang ch·ªù x·ª≠ l√Ω Fulfilled: ƒê√£ ho√†n th√†nh th√†nh c√¥ng Rejected: ƒê√£ th·∫•t b·∫°i C√∫ ph√°p t·∫°o Promise const myPromise = new Promise((resolve, reject) =&gt; { // T√°c v·ª• b·∫•t ƒë·ªìng b·ªô const success = true; // Gi·∫£ l·∫≠p k·∫øt qu·∫£ if (success) { resolve(&#34;T√°c v·ª• ho√†n th√†nh th√†nh c√¥ng!&#34;); } else { reject(&#34;T√°c v·ª• th·∫•t b·∫°i!&#34;); } }); S·ª≠ d·ª•ng Promise myPromise .then(result =&gt; { console.log(&#34;Th√†nh c√¥ng:&#34;, result); }) .catch(error =&gt; { console.log(&#34;L·ªói:&#34;, error); }) .finally(() =&gt; { console.log(&#34;Promise ƒë√£ ho√†n th√†nh&#34;); }); V√≠ d·ª• 1: Promise c∆° b·∫£n // H√†m gi·∫£ l·∫≠p API call function fetchUserData(userId) { return new Promise((resolve, reject) =&gt; { // Gi·∫£ l·∫≠p delay setTimeout(() =&gt; { if (userId &gt; 0) { resolve({ id: userId, name: `User ${userId}`, email: `user${userId}@example.com` }); } else { reject(new Error(&#34;Invalid user ID&#34;)); } }, 1000); }); } // S·ª≠ d·ª•ng Promise fetchUserData(1) .then(user =&gt; { console.log(&#34;User data:&#34;, user); return user.name; // Tr·∫£ v·ªÅ gi√° tr·ªã cho .then() ti·∫øp theo }) .then(name =&gt; { console.log(&#34;User name:&#34;, name); }) .catch(error =&gt; { console.error(&#34;Error:&#34;, error.message); }); // Test v·ªõi ID kh√¥ng h·ª£p l·ªá fetchUserData(-1) .then(user =&gt; { console.log(&#34;User data:&#34;, user); }) .catch(error =&gt; { console.error(&#34;Error:&#34;, error.message); // Invalid user ID }); V√≠ d·ª• 2: Promise Chain // H√†m gi·∫£ l·∫≠p c√°c API calls function fetchUser(userId) { return new Promise((resolve) =&gt; { setTimeout(() =&gt; { resolve({ id: userId, name: `User ${userId}` }); }, 500); }); } function fetchUserPosts(userId) { return new Promise((resolve) =&gt; { setTimeout(() =&gt; { resolve([ { id: 1, title: &#34;Post 1&#34;, userId: userId }, { id: 2, title: &#34;Post 2&#34;, userId: userId } ]); }, 300); }); } function fetchUserComments(userId) { return new Promise((resolve) =&gt; { setTimeout(() =&gt; { resolve([ { id: 1, text: &#34;Comment 1&#34;, userId: userId }, { id: 2, text: &#34;Comment 2&#34;, userId: userId } ]); }, 200); }); } // Promise chain fetchUser(1) .then(user =&gt; { console.log(&#34;User:&#34;, user); return fetchUserPosts(user.id); }) .then(posts =&gt; { console.log(&#34;Posts:&#34;, posts); return fetchUserComments(1); }) .then(comments =&gt; { console.log(&#34;Comments:&#34;, comments); }) .catch(error =&gt; { console.error(&#34;Error in chain:&#34;, error); }); Promise.all() - Ch·∫°y song song // Ch·∫°y nhi·ªÅu Promise song song Promise.all([ fetchUser(1), fetchUser(2), fetchUser(3) ]) .then(users =&gt; { console.log(&#34;All users:&#34;, users); }) .catch(error =&gt; { console.error(&#34;Error fetching users:&#34;, error); }); // V√≠ d·ª• v·ªõi th·ªùi gian kh√°c nhau function delayedPromise(value, delay) { return new Promise(resolve =&gt; { setTimeout(() =&gt; resolve(value), delay); }); } console.time(&#34;Promise.all&#34;); Promise.all([ delayedPromise(&#34;A&#34;, 1000), delayedPromise(&#34;B&#34;, 500), delayedPromise(&#34;C&#34;, 1500) ]) .then(results =&gt; { console.timeEnd(&#34;Promise.all&#34;); // ~1500ms (th·ªùi gian c·ªßa Promise ch·∫≠m nh·∫•t) console.log(&#34;Results:&#34;, results); // [&#34;A&#34;, &#34;B&#34;, &#34;C&#34;] }); Promise.race() - L·∫•y k·∫øt qu·∫£ nhanh nh·∫•t // L·∫•y k·∫øt qu·∫£ c·ªßa Promise ho√†n th√†nh ƒë·∫ßu ti√™n function timeoutPromise(ms) { return new Promise((_, reject) =&gt; { setTimeout(() =&gt; reject(new Error(&#34;Timeout&#34;)), ms); }); } function fetchWithTimeout(url, timeout = 5000) { return Promise.race([ fetch(url), timeoutPromise(timeout) ]); } // V√≠ d·ª• s·ª≠ d·ª•ng fetchWithTimeout(&#34;https://api.example.com/data&#34;, 3000) .then(response =&gt; response.json()) .then(data =&gt; console.log(&#34;Data:&#34;, data)) .catch(error =&gt; console.error(&#34;Error:&#34;, error.message)); Async/Await - C√∫ ph√°p hi·ªán ƒë·∫°i Async/Await l√† c√∫ ph√°p sugar cho Promise, gi√∫p code d·ªÖ ƒë·ªçc v√† vi·∫øt h∆°n.">
  <meta itemprop="datePublished" content="2025-10-17T10:20:00+07:00">
  <meta itemprop="dateModified" content="2025-10-17T10:20:00+07:00">
  <meta itemprop="wordCount" content="1827">
  <meta itemprop="keywords" content="Promise,Async,Await,Javascript">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="JavaScript: Promise v√† Async/Await">
  <meta name="twitter:description" content="Gi·ªõi thi·ªáu v·ªÅ Promise v√† Async/Await JavaScript l√† ng√¥n ng·ªØ ƒë∆°n lu·ªìng (single-threaded), nh∆∞ng v·ªõi Promise v√† Async/Await, ch√∫ng ta c√≥ th·ªÉ x·ª≠ l√Ω c√°c t√°c v·ª• b·∫•t ƒë·ªìng b·ªô m·ªôt c√°ch hi·ªáu qu·∫£ m√† kh√¥ng b·ªã ch·∫∑n lu·ªìng ch√≠nh.
Promise c∆° b·∫£n Promise l√† m·ªôt object ƒë·∫°i di·ªán cho k·∫øt qu·∫£ c·ªßa m·ªôt t√°c v·ª• b·∫•t ƒë·ªìng b·ªô. N√≥ c√≥ th·ªÉ ·ªü m·ªôt trong ba tr·∫°ng th√°i:
Pending: ƒêang ch·ªù x·ª≠ l√Ω Fulfilled: ƒê√£ ho√†n th√†nh th√†nh c√¥ng Rejected: ƒê√£ th·∫•t b·∫°i C√∫ ph√°p t·∫°o Promise const myPromise = new Promise((resolve, reject) =&gt; { // T√°c v·ª• b·∫•t ƒë·ªìng b·ªô const success = true; // Gi·∫£ l·∫≠p k·∫øt qu·∫£ if (success) { resolve(&#34;T√°c v·ª• ho√†n th√†nh th√†nh c√¥ng!&#34;); } else { reject(&#34;T√°c v·ª• th·∫•t b·∫°i!&#34;); } }); S·ª≠ d·ª•ng Promise myPromise .then(result =&gt; { console.log(&#34;Th√†nh c√¥ng:&#34;, result); }) .catch(error =&gt; { console.log(&#34;L·ªói:&#34;, error); }) .finally(() =&gt; { console.log(&#34;Promise ƒë√£ ho√†n th√†nh&#34;); }); V√≠ d·ª• 1: Promise c∆° b·∫£n // H√†m gi·∫£ l·∫≠p API call function fetchUserData(userId) { return new Promise((resolve, reject) =&gt; { // Gi·∫£ l·∫≠p delay setTimeout(() =&gt; { if (userId &gt; 0) { resolve({ id: userId, name: `User ${userId}`, email: `user${userId}@example.com` }); } else { reject(new Error(&#34;Invalid user ID&#34;)); } }, 1000); }); } // S·ª≠ d·ª•ng Promise fetchUserData(1) .then(user =&gt; { console.log(&#34;User data:&#34;, user); return user.name; // Tr·∫£ v·ªÅ gi√° tr·ªã cho .then() ti·∫øp theo }) .then(name =&gt; { console.log(&#34;User name:&#34;, name); }) .catch(error =&gt; { console.error(&#34;Error:&#34;, error.message); }); // Test v·ªõi ID kh√¥ng h·ª£p l·ªá fetchUserData(-1) .then(user =&gt; { console.log(&#34;User data:&#34;, user); }) .catch(error =&gt; { console.error(&#34;Error:&#34;, error.message); // Invalid user ID }); V√≠ d·ª• 2: Promise Chain // H√†m gi·∫£ l·∫≠p c√°c API calls function fetchUser(userId) { return new Promise((resolve) =&gt; { setTimeout(() =&gt; { resolve({ id: userId, name: `User ${userId}` }); }, 500); }); } function fetchUserPosts(userId) { return new Promise((resolve) =&gt; { setTimeout(() =&gt; { resolve([ { id: 1, title: &#34;Post 1&#34;, userId: userId }, { id: 2, title: &#34;Post 2&#34;, userId: userId } ]); }, 300); }); } function fetchUserComments(userId) { return new Promise((resolve) =&gt; { setTimeout(() =&gt; { resolve([ { id: 1, text: &#34;Comment 1&#34;, userId: userId }, { id: 2, text: &#34;Comment 2&#34;, userId: userId } ]); }, 200); }); } // Promise chain fetchUser(1) .then(user =&gt; { console.log(&#34;User:&#34;, user); return fetchUserPosts(user.id); }) .then(posts =&gt; { console.log(&#34;Posts:&#34;, posts); return fetchUserComments(1); }) .then(comments =&gt; { console.log(&#34;Comments:&#34;, comments); }) .catch(error =&gt; { console.error(&#34;Error in chain:&#34;, error); }); Promise.all() - Ch·∫°y song song // Ch·∫°y nhi·ªÅu Promise song song Promise.all([ fetchUser(1), fetchUser(2), fetchUser(3) ]) .then(users =&gt; { console.log(&#34;All users:&#34;, users); }) .catch(error =&gt; { console.error(&#34;Error fetching users:&#34;, error); }); // V√≠ d·ª• v·ªõi th·ªùi gian kh√°c nhau function delayedPromise(value, delay) { return new Promise(resolve =&gt; { setTimeout(() =&gt; resolve(value), delay); }); } console.time(&#34;Promise.all&#34;); Promise.all([ delayedPromise(&#34;A&#34;, 1000), delayedPromise(&#34;B&#34;, 500), delayedPromise(&#34;C&#34;, 1500) ]) .then(results =&gt; { console.timeEnd(&#34;Promise.all&#34;); // ~1500ms (th·ªùi gian c·ªßa Promise ch·∫≠m nh·∫•t) console.log(&#34;Results:&#34;, results); // [&#34;A&#34;, &#34;B&#34;, &#34;C&#34;] }); Promise.race() - L·∫•y k·∫øt qu·∫£ nhanh nh·∫•t // L·∫•y k·∫øt qu·∫£ c·ªßa Promise ho√†n th√†nh ƒë·∫ßu ti√™n function timeoutPromise(ms) { return new Promise((_, reject) =&gt; { setTimeout(() =&gt; reject(new Error(&#34;Timeout&#34;)), ms); }); } function fetchWithTimeout(url, timeout = 5000) { return Promise.race([ fetch(url), timeoutPromise(timeout) ]); } // V√≠ d·ª• s·ª≠ d·ª•ng fetchWithTimeout(&#34;https://api.example.com/data&#34;, 3000) .then(response =&gt; response.json()) .then(data =&gt; console.log(&#34;Data:&#34;, data)) .catch(error =&gt; console.error(&#34;Error:&#34;, error.message)); Async/Await - C√∫ ph√°p hi·ªán ƒë·∫°i Async/Await l√† c√∫ ph√°p sugar cho Promise, gi√∫p code d·ªÖ ƒë·ªçc v√† vi·∫øt h∆°n.">
      <meta name="twitter:site" content="@https://twitter.com/phuoc_dev">

      
    
	<link rel="stylesheet" href="/css/blogger-about.css" />
<script src="/js/search.js" defer></script>
<script src="/js/animations.js" defer></script>


  </head><body class="ma0 avenir bg-near-white production">

    

  <header>
    <div class="pb3-m pb6-l bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l center items-center justify-between">
    <a href="/blogphuoc.github.io/" class="f3 fw2 hover-white white-90 dib no-underline">
      
        Blog Ti·∫øn Ph∆∞·ªõc
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white white-90 no-underline" href="/blogphuoc.github.io/" title="Trang ch·ªß page">
              Trang ch·ªß
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white white-90 no-underline" href="/blogphuoc.github.io/posts/" title="Blog page">
              Blog
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white white-90 no-underline" href="/blogphuoc.github.io/about/" title="Gi·ªõi thi·ªáu page">
              Gi·ªõi thi·ªáu
            </a>
          </li>
          
        </ul>
      
      <div class="ananke-socials"></div>

      
        <a class="ml3 f6 white-80 no-underline" href="https://phuoc0209.github.io/blogphuoc.github.io/" target="_blank" rel="noopener">GitHub</a>
      
    </div>
  </div>
</nav>

      <div class="tc-l pv3 ph3 ph4-ns">
        <h1 class="f2 f-subheadline-l fw2 light-silver mb0 lh-title">
          JavaScript: Promise v√† Async/Await
        </h1>
        
      </div>
    </div>
  </header>


    <main class="pb7" role="main">
      
<article class="mw7 center ph3 pv5">
  
  <header class="mb4 tc">
    <h1 class="f1 lh-title athelas mb2 dark-gray">
      JavaScript: Promise v√† Async/Await
    </h1>

    
      <p class="f6 gray mv2">
        ‚úçÔ∏è <strong>Nguy·ªÖn Ti·∫øn Ph∆∞·ªõc</strong>
      </p>
    

    
      <time class="f6 gray db">
        üìÖ 17 Oct 2025
      </time>
    

    
  </header>

  
  <div class="lh-copy f4 serif mid-gray measure-wide center">
    <h2 id="gi·ªõi-thi·ªáu-v·ªÅ-promise-v√†-asyncawait">Gi·ªõi thi·ªáu v·ªÅ Promise v√† Async/Await</h2>
<p>JavaScript l√† ng√¥n ng·ªØ ƒë∆°n lu·ªìng (single-threaded), nh∆∞ng v·ªõi Promise v√† Async/Await, ch√∫ng ta c√≥ th·ªÉ x·ª≠ l√Ω c√°c t√°c v·ª• b·∫•t ƒë·ªìng b·ªô m·ªôt c√°ch hi·ªáu qu·∫£ m√† kh√¥ng b·ªã ch·∫∑n lu·ªìng ch√≠nh.</p>
<h2 id="promise-c∆°-b·∫£n">Promise c∆° b·∫£n</h2>
<p>Promise l√† m·ªôt object ƒë·∫°i di·ªán cho k·∫øt qu·∫£ c·ªßa m·ªôt t√°c v·ª• b·∫•t ƒë·ªìng b·ªô. N√≥ c√≥ th·ªÉ ·ªü m·ªôt trong ba tr·∫°ng th√°i:</p>
<ul>
<li><strong>Pending</strong>: ƒêang ch·ªù x·ª≠ l√Ω</li>
<li><strong>Fulfilled</strong>: ƒê√£ ho√†n th√†nh th√†nh c√¥ng</li>
<li><strong>Rejected</strong>: ƒê√£ th·∫•t b·∫°i</li>
</ul>
<h3 id="c√∫-ph√°p-t·∫°o-promise">C√∫ ph√°p t·∫°o Promise</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">myPromise</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Promise((<span style="color:#a6e22e">resolve</span>, <span style="color:#a6e22e">reject</span>) =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// T√°c v·ª• b·∫•t ƒë·ªìng b·ªô
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">success</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>; <span style="color:#75715e">// Gi·∫£ l·∫≠p k·∫øt qu·∫£
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">success</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">resolve</span>(<span style="color:#e6db74">&#34;T√°c v·ª• ho√†n th√†nh th√†nh c√¥ng!&#34;</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">reject</span>(<span style="color:#e6db74">&#34;T√°c v·ª• th·∫•t b·∫°i!&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h3 id="s·ª≠-d·ª•ng-promise">S·ª≠ d·ª•ng Promise</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">myPromise</span>
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">result</span> =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Th√†nh c√¥ng:&#34;</span>, <span style="color:#a6e22e">result</span>);
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">error</span> =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;L·ªói:&#34;</span>, <span style="color:#a6e22e">error</span>);
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#66d9ef">finally</span>(() =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Promise ƒë√£ ho√†n th√†nh&#34;</span>);
</span></span><span style="display:flex;"><span>    });
</span></span></code></pre></div><h2 id="v√≠-d·ª•-1-promise-c∆°-b·∫£n">V√≠ d·ª• 1: Promise c∆° b·∫£n</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// H√†m gi·∫£ l·∫≠p API call
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fetchUserData</span>(<span style="color:#a6e22e">userId</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Promise((<span style="color:#a6e22e">resolve</span>, <span style="color:#a6e22e">reject</span>) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Gi·∫£ l·∫≠p delay
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">setTimeout</span>(() =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">userId</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">resolve</span>({
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">userId</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`User </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">userId</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">email</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`user</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">userId</span><span style="color:#e6db74">}</span><span style="color:#e6db74">@example.com`</span>
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">reject</span>(<span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#34;Invalid user ID&#34;</span>));
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }, <span style="color:#ae81ff">1000</span>);
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// S·ª≠ d·ª•ng Promise
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">fetchUserData</span>(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">user</span> =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;User data:&#34;</span>, <span style="color:#a6e22e">user</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">name</span>; <span style="color:#75715e">// Tr·∫£ v·ªÅ gi√° tr·ªã cho .then() ti·∫øp theo
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">name</span> =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;User name:&#34;</span>, <span style="color:#a6e22e">name</span>);
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">error</span> =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#34;Error:&#34;</span>, <span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>);
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Test v·ªõi ID kh√¥ng h·ª£p l·ªá
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">fetchUserData</span>(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">user</span> =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;User data:&#34;</span>, <span style="color:#a6e22e">user</span>);
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">error</span> =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#34;Error:&#34;</span>, <span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>); <span style="color:#75715e">// Invalid user ID
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    });
</span></span></code></pre></div><h2 id="v√≠-d·ª•-2-promise-chain">V√≠ d·ª• 2: Promise Chain</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// H√†m gi·∫£ l·∫≠p c√°c API calls
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fetchUser</span>(<span style="color:#a6e22e">userId</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Promise((<span style="color:#a6e22e">resolve</span>) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">setTimeout</span>(() =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">resolve</span>({ <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">userId</span>, <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`User </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">userId</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span> });
</span></span><span style="display:flex;"><span>        }, <span style="color:#ae81ff">500</span>);
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fetchUserPosts</span>(<span style="color:#a6e22e">userId</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Promise((<span style="color:#a6e22e">resolve</span>) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">setTimeout</span>(() =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">resolve</span>([
</span></span><span style="display:flex;"><span>                { <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Post 1&#34;</span>, <span style="color:#a6e22e">userId</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">userId</span> },
</span></span><span style="display:flex;"><span>                { <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>, <span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Post 2&#34;</span>, <span style="color:#a6e22e">userId</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">userId</span> }
</span></span><span style="display:flex;"><span>            ]);
</span></span><span style="display:flex;"><span>        }, <span style="color:#ae81ff">300</span>);
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fetchUserComments</span>(<span style="color:#a6e22e">userId</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Promise((<span style="color:#a6e22e">resolve</span>) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">setTimeout</span>(() =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">resolve</span>([
</span></span><span style="display:flex;"><span>                { <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">text</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Comment 1&#34;</span>, <span style="color:#a6e22e">userId</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">userId</span> },
</span></span><span style="display:flex;"><span>                { <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>, <span style="color:#a6e22e">text</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Comment 2&#34;</span>, <span style="color:#a6e22e">userId</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">userId</span> }
</span></span><span style="display:flex;"><span>            ]);
</span></span><span style="display:flex;"><span>        }, <span style="color:#ae81ff">200</span>);
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Promise chain
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">fetchUser</span>(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">user</span> =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;User:&#34;</span>, <span style="color:#a6e22e">user</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">fetchUserPosts</span>(<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">id</span>);
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">posts</span> =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Posts:&#34;</span>, <span style="color:#a6e22e">posts</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">fetchUserComments</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">comments</span> =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Comments:&#34;</span>, <span style="color:#a6e22e">comments</span>);
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">error</span> =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#34;Error in chain:&#34;</span>, <span style="color:#a6e22e">error</span>);
</span></span><span style="display:flex;"><span>    });
</span></span></code></pre></div><h2 id="promiseall---ch·∫°y-song-song">Promise.all() - Ch·∫°y song song</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Ch·∫°y nhi·ªÅu Promise song song
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>Promise.<span style="color:#a6e22e">all</span>([
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fetchUser</span>(<span style="color:#ae81ff">1</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fetchUser</span>(<span style="color:#ae81ff">2</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fetchUser</span>(<span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>])
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">users</span> =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;All users:&#34;</span>, <span style="color:#a6e22e">users</span>);
</span></span><span style="display:flex;"><span>})
</span></span><span style="display:flex;"><span>.<span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">error</span> =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#34;Error fetching users:&#34;</span>, <span style="color:#a6e22e">error</span>);
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// V√≠ d·ª• v·ªõi th·ªùi gian kh√°c nhau
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">delayedPromise</span>(<span style="color:#a6e22e">value</span>, <span style="color:#a6e22e">delay</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Promise(<span style="color:#a6e22e">resolve</span> =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">setTimeout</span>(() =&gt; <span style="color:#a6e22e">resolve</span>(<span style="color:#a6e22e">value</span>), <span style="color:#a6e22e">delay</span>);
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">time</span>(<span style="color:#e6db74">&#34;Promise.all&#34;</span>);
</span></span><span style="display:flex;"><span>Promise.<span style="color:#a6e22e">all</span>([
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">delayedPromise</span>(<span style="color:#e6db74">&#34;A&#34;</span>, <span style="color:#ae81ff">1000</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">delayedPromise</span>(<span style="color:#e6db74">&#34;B&#34;</span>, <span style="color:#ae81ff">500</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">delayedPromise</span>(<span style="color:#e6db74">&#34;C&#34;</span>, <span style="color:#ae81ff">1500</span>)
</span></span><span style="display:flex;"><span>])
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">results</span> =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">timeEnd</span>(<span style="color:#e6db74">&#34;Promise.all&#34;</span>); <span style="color:#75715e">// ~1500ms (th·ªùi gian c·ªßa Promise ch·∫≠m nh·∫•t)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Results:&#34;</span>, <span style="color:#a6e22e">results</span>); <span style="color:#75715e">// [&#34;A&#34;, &#34;B&#34;, &#34;C&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><h2 id="promiserace---l·∫•y-k·∫øt-qu·∫£-nhanh-nh·∫•t">Promise.race() - L·∫•y k·∫øt qu·∫£ nhanh nh·∫•t</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// L·∫•y k·∫øt qu·∫£ c·ªßa Promise ho√†n th√†nh ƒë·∫ßu ti√™n
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">timeoutPromise</span>(<span style="color:#a6e22e">ms</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Promise((<span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">reject</span>) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">setTimeout</span>(() =&gt; <span style="color:#a6e22e">reject</span>(<span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#34;Timeout&#34;</span>)), <span style="color:#a6e22e">ms</span>);
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fetchWithTimeout</span>(<span style="color:#a6e22e">url</span>, <span style="color:#a6e22e">timeout</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">5000</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> Promise.<span style="color:#a6e22e">race</span>([
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">fetch</span>(<span style="color:#a6e22e">url</span>),
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">timeoutPromise</span>(<span style="color:#a6e22e">timeout</span>)
</span></span><span style="display:flex;"><span>    ]);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// V√≠ d·ª• s·ª≠ d·ª•ng
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">fetchWithTimeout</span>(<span style="color:#e6db74">&#34;https://api.example.com/data&#34;</span>, <span style="color:#ae81ff">3000</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">response</span> =&gt; <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">json</span>())
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">data</span> =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Data:&#34;</span>, <span style="color:#a6e22e">data</span>))
</span></span><span style="display:flex;"><span>    .<span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">error</span> =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#34;Error:&#34;</span>, <span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>));
</span></span></code></pre></div><h2 id="asyncawait---c√∫-ph√°p-hi·ªán-ƒë·∫°i">Async/Await - C√∫ ph√°p hi·ªán ƒë·∫°i</h2>
<p>Async/Await l√† c√∫ ph√°p sugar cho Promise, gi√∫p code d·ªÖ ƒë·ªçc v√† vi·∫øt h∆°n.</p>
<h3 id="c√∫-ph√°p-c∆°-b·∫£n">C√∫ ph√°p c∆° b·∫£n</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// H√†m async lu√¥n tr·∫£ v·ªÅ Promise
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fetchData</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">someAsyncOperation</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">result</span>;
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#34;Error:&#34;</span>, <span style="color:#a6e22e">error</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">throw</span> <span style="color:#a6e22e">error</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="v√≠-d·ª•-3-asyncawait-c∆°-b·∫£n">V√≠ d·ª• 3: Async/Await c∆° b·∫£n</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// H√†m gi·∫£ l·∫≠p API
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">apiCall</span>(<span style="color:#a6e22e">endpoint</span>, <span style="color:#a6e22e">delay</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Promise((<span style="color:#a6e22e">resolve</span>, <span style="color:#a6e22e">reject</span>) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">setTimeout</span>(() =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (Math.<span style="color:#a6e22e">random</span>() <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0.1</span>) { <span style="color:#75715e">// 90% th√†nh c√¥ng
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">resolve</span>({ <span style="color:#a6e22e">endpoint</span>, <span style="color:#a6e22e">data</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`Data from </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">endpoint</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span> });
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">reject</span>(<span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">`Failed to fetch </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">endpoint</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>));
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }, <span style="color:#a6e22e">delay</span>);
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// S·ª≠ d·ª•ng async/await
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fetchUserData</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Fetching user...&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">user</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">apiCall</span>(<span style="color:#e6db74">&#34;/user&#34;</span>, <span style="color:#ae81ff">800</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;User:&#34;</span>, <span style="color:#a6e22e">user</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Fetching posts...&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">posts</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">apiCall</span>(<span style="color:#e6db74">&#34;/posts&#34;</span>, <span style="color:#ae81ff">600</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Posts:&#34;</span>, <span style="color:#a6e22e">posts</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Fetching comments...&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">comments</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">apiCall</span>(<span style="color:#e6db74">&#34;/comments&#34;</span>, <span style="color:#ae81ff">400</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Comments:&#34;</span>, <span style="color:#a6e22e">comments</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> { <span style="color:#a6e22e">user</span>, <span style="color:#a6e22e">posts</span>, <span style="color:#a6e22e">comments</span> };
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#34;Error fetching data:&#34;</span>, <span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">throw</span> <span style="color:#a6e22e">error</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// G·ªçi h√†m async
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">fetchUserData</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">data</span> =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;All data fetched:&#34;</span>, <span style="color:#a6e22e">data</span>);
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .<span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">error</span> =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#34;Failed to fetch data:&#34;</span>, <span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>);
</span></span><span style="display:flex;"><span>    });
</span></span></code></pre></div><h3 id="v√≠-d·ª•-4-asyncawait-v·ªõi-promiseall">V√≠ d·ª• 4: Async/Await v·ªõi Promise.all</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fetchAllData</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Fetching all data in parallel...&#34;</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">user</span>, <span style="color:#a6e22e">posts</span>, <span style="color:#a6e22e">comments</span>] <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> Promise.<span style="color:#a6e22e">all</span>([
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">apiCall</span>(<span style="color:#e6db74">&#34;/user&#34;</span>, <span style="color:#ae81ff">800</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">apiCall</span>(<span style="color:#e6db74">&#34;/posts&#34;</span>, <span style="color:#ae81ff">600</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">apiCall</span>(<span style="color:#e6db74">&#34;/comments&#34;</span>, <span style="color:#ae81ff">400</span>)
</span></span><span style="display:flex;"><span>        ]);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;All data fetched:&#34;</span>, { <span style="color:#a6e22e">user</span>, <span style="color:#a6e22e">posts</span>, <span style="color:#a6e22e">comments</span> });
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> { <span style="color:#a6e22e">user</span>, <span style="color:#a6e22e">posts</span>, <span style="color:#a6e22e">comments</span> };
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#34;Error fetching data:&#34;</span>, <span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">throw</span> <span style="color:#a6e22e">error</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">fetchAllData</span>();
</span></span></code></pre></div><h2 id="v√≠-d·ª•-th·ª±c-t·∫ø-t·∫°o-api-client">V√≠ d·ª• th·ª±c t·∫ø: T·∫°o API Client</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ApiClient</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">baseURL</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">baseURL</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">baseURL</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">async</span> <span style="color:#a6e22e">request</span>(<span style="color:#a6e22e">endpoint</span>, <span style="color:#a6e22e">options</span> <span style="color:#f92672">=</span> {}) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">url</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">baseURL</span><span style="color:#e6db74">}${</span><span style="color:#a6e22e">endpoint</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">config</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">headers</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#39;Content-Type&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;application/json&#39;</span>,
</span></span><span style="display:flex;"><span>                ...<span style="color:#a6e22e">options</span>.<span style="color:#a6e22e">headers</span>
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            ...<span style="color:#a6e22e">options</span>
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">response</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#a6e22e">url</span>, <span style="color:#a6e22e">config</span>);
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">ok</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">`HTTP error! status: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">status</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">json</span>();
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">`API request failed: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">endpoint</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>, <span style="color:#a6e22e">error</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">throw</span> <span style="color:#a6e22e">error</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">async</span> <span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">endpoint</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">request</span>(<span style="color:#a6e22e">endpoint</span>, { <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;GET&#39;</span> });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">async</span> <span style="color:#a6e22e">post</span>(<span style="color:#a6e22e">endpoint</span>, <span style="color:#a6e22e">data</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">request</span>(<span style="color:#a6e22e">endpoint</span>, {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;POST&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">body</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">data</span>)
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">async</span> <span style="color:#a6e22e">put</span>(<span style="color:#a6e22e">endpoint</span>, <span style="color:#a6e22e">data</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">request</span>(<span style="color:#a6e22e">endpoint</span>, {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;PUT&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">body</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">data</span>)
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">async</span> <span style="color:#66d9ef">delete</span>(<span style="color:#a6e22e">endpoint</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">request</span>(<span style="color:#a6e22e">endpoint</span>, { <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;DELETE&#39;</span> });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// S·ª≠ d·ª•ng API Client
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">api</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ApiClient</span>(<span style="color:#e6db74">&#39;https://jsonplaceholder.typicode.com&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">demonstrateApiClient</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// L·∫•y danh s√°ch users
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">users</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">api</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/users&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Users:&#39;</span>, <span style="color:#a6e22e">users</span>.<span style="color:#a6e22e">slice</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">3</span>));
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// L·∫•y user c·ª• th·ªÉ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">user</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">api</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/users/1&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;User 1:&#39;</span>, <span style="color:#a6e22e">user</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// T·∫°o post m·ªõi
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">newPost</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">api</span>.<span style="color:#a6e22e">post</span>(<span style="color:#e6db74">&#39;/posts&#39;</span>, {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;New Post&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">body</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;This is a new post&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">userId</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Created post:&#39;</span>, <span style="color:#a6e22e">newPost</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// C·∫≠p nh·∫≠t post
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">updatedPost</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">api</span>.<span style="color:#a6e22e">put</span>(<span style="color:#e6db74">`/posts/</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">newPost</span>.<span style="color:#a6e22e">id</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>, {
</span></span><span style="display:flex;"><span>            ...<span style="color:#a6e22e">newPost</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Updated Post Title&#39;</span>
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Updated post:&#39;</span>, <span style="color:#a6e22e">updatedPost</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#39;API Error:&#39;</span>, <span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// demonstrateApiClient();
</span></span></span></code></pre></div><h2 id="v√≠-d·ª•-th·ª±c-t·∫ø-retry-logic-v·ªõi-exponential-backoff">V√≠ d·ª• th·ª±c t·∫ø: Retry Logic v·ªõi Exponential Backoff</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fetchWithRetry</span>(<span style="color:#a6e22e">url</span>, <span style="color:#a6e22e">maxRetries</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>, <span style="color:#a6e22e">baseDelay</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">attempt</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">attempt</span> <span style="color:#f92672">&lt;=</span> <span style="color:#a6e22e">maxRetries</span>; <span style="color:#a6e22e">attempt</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`Attempt </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">attempt</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> for </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">url</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">response</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#a6e22e">url</span>);
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">ok</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">`HTTP </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">status</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">json</span>();
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`Attempt </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">attempt</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> failed:`</span>, <span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>);
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">attempt</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">maxRetries</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">`Failed after </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">maxRetries</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> attempts: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Exponential backoff: delay tƒÉng g·∫•p ƒë√¥i m·ªói l·∫ßn retry
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">delay</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">baseDelay</span> <span style="color:#f92672">*</span> Math.<span style="color:#a6e22e">pow</span>(<span style="color:#ae81ff">2</span>, <span style="color:#a6e22e">attempt</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`Retrying in </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">delay</span><span style="color:#e6db74">}</span><span style="color:#e6db74">ms...`</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">await</span> <span style="color:#66d9ef">new</span> Promise(<span style="color:#a6e22e">resolve</span> =&gt; <span style="color:#a6e22e">setTimeout</span>(<span style="color:#a6e22e">resolve</span>, <span style="color:#a6e22e">delay</span>));
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// S·ª≠ d·ª•ng retry logic
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">testRetryLogic</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">data</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetchWithRetry</span>(<span style="color:#e6db74">&#39;https://httpstat.us/500&#39;</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">1000</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Success:&#39;</span>, <span style="color:#a6e22e">data</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#39;Final error:&#39;</span>, <span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// testRetryLogic();
</span></span></span></code></pre></div><h2 id="v√≠-d·ª•-th·ª±c-t·∫ø-batch-processing-v·ªõi-concurrency-control">V√≠ d·ª• th·ª±c t·∫ø: Batch Processing v·ªõi Concurrency Control</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">processBatch</span>(<span style="color:#a6e22e">items</span>, <span style="color:#a6e22e">processor</span>, <span style="color:#a6e22e">concurrency</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">results</span> <span style="color:#f92672">=</span> [];
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">errors</span> <span style="color:#f92672">=</span> [];
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Chia items th√†nh c√°c batch nh·ªè
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">concurrency</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">batch</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">slice</span>(<span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">concurrency</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`Processing batch </span><span style="color:#e6db74">${</span>Math.<span style="color:#a6e22e">floor</span>(<span style="color:#a6e22e">i</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">concurrency</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span><span style="color:#e6db74">}</span><span style="color:#e6db74">...`</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">batchPromises</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">batch</span>.<span style="color:#a6e22e">map</span>(<span style="color:#66d9ef">async</span> (<span style="color:#a6e22e">item</span>, <span style="color:#a6e22e">index</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">processor</span>(<span style="color:#a6e22e">item</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> { <span style="color:#a6e22e">success</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>, <span style="color:#a6e22e">data</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">result</span>, <span style="color:#a6e22e">index</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">index</span> };
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> { <span style="color:#a6e22e">success</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>, <span style="color:#a6e22e">error</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>, <span style="color:#a6e22e">index</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">index</span> };
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">batchResults</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> Promise.<span style="color:#a6e22e">all</span>(<span style="color:#a6e22e">batchPromises</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">batchResults</span>.<span style="color:#a6e22e">forEach</span>(<span style="color:#a6e22e">result</span> =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">success</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">results</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">data</span>);
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">push</span>({ <span style="color:#a6e22e">item</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">items</span>[<span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">index</span>], <span style="color:#a6e22e">error</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">error</span> });
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> { <span style="color:#a6e22e">results</span>, <span style="color:#a6e22e">errors</span> };
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// V√≠ d·ª• s·ª≠ d·ª•ng batch processing
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">demonstrateBatchProcessing</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">urls</span> <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;https://jsonplaceholder.typicode.com/posts/1&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;https://jsonplaceholder.typicode.com/posts/2&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;https://jsonplaceholder.typicode.com/posts/3&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;https://jsonplaceholder.typicode.com/posts/4&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;https://jsonplaceholder.typicode.com/posts/5&#39;</span>
</span></span><span style="display:flex;"><span>    ];
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fetchPost</span>(<span style="color:#a6e22e">url</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">response</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#a6e22e">url</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">ok</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">`HTTP </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">status</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">json</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">results</span>, <span style="color:#a6e22e">errors</span> } <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">processBatch</span>(<span style="color:#a6e22e">urls</span>, <span style="color:#a6e22e">fetchPost</span>, <span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`Processed </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">results</span>.<span style="color:#a6e22e">length</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> items successfully`</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`Failed </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">length</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> items`</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Errors:&#39;</span>, <span style="color:#a6e22e">errors</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#39;Batch processing failed:&#39;</span>, <span style="color:#a6e22e">error</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// demonstrateBatchProcessing();
</span></span></span></code></pre></div><h2 id="v√≠-d·ª•-th·ª±c-t·∫ø-caching-v·ªõi-promise">V√≠ d·ª• th·ª±c t·∫ø: Caching v·ªõi Promise</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PromiseCache</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">ttl</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">60000</span>) { <span style="color:#75715e">// 60 seconds default TTL
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">cache</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">ttl</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ttl</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">async</span> <span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">fetcher</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">cached</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">cache</span>.<span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">key</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">cached</span> <span style="color:#f92672">&amp;&amp;</span> Date.<span style="color:#a6e22e">now</span>() <span style="color:#f92672">-</span> <span style="color:#a6e22e">cached</span>.<span style="color:#a6e22e">timestamp</span> <span style="color:#f92672">&lt;</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">ttl</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`Cache hit for key: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">key</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">cached</span>.<span style="color:#a6e22e">data</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`Cache miss for key: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">key</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">data</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetcher</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">cache</span>.<span style="color:#a6e22e">set</span>(<span style="color:#a6e22e">key</span>, {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">data</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">timestamp</span><span style="color:#f92672">:</span> Date.<span style="color:#a6e22e">now</span>()
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">data</span>;
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">`Error fetching data for key </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">key</span><span style="color:#e6db74">}</span><span style="color:#e6db74">:`</span>, <span style="color:#a6e22e">error</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">throw</span> <span style="color:#a6e22e">error</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">clear</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">cache</span>.<span style="color:#a6e22e">clear</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">size</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">cache</span>.<span style="color:#a6e22e">size</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// S·ª≠ d·ª•ng PromiseCache
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">cache</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">PromiseCache</span>(<span style="color:#ae81ff">30000</span>); <span style="color:#75715e">// 30 seconds TTL
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fetchUserWithCache</span>(<span style="color:#a6e22e">userId</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">cache</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">`user_</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">userId</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>, <span style="color:#66d9ef">async</span> () =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`Fetching user </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">userId</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> from API...`</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">response</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#e6db74">`https://jsonplaceholder.typicode.com/users/</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">userId</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">json</span>();
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Test caching
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">testCaching</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;First call:&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">user1</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetchUserWithCache</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;User 1:&#39;</span>, <span style="color:#a6e22e">user1</span>.<span style="color:#a6e22e">name</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;\nSecond call (should be cached):&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">user1Cached</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetchUserWithCache</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;User 1 cached:&#39;</span>, <span style="color:#a6e22e">user1Cached</span>.<span style="color:#a6e22e">name</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;\nDifferent user:&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">user2</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetchUserWithCache</span>(<span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;User 2:&#39;</span>, <span style="color:#a6e22e">user2</span>.<span style="color:#a6e22e">name</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`\nCache size: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">cache</span>.<span style="color:#a6e22e">size</span>()<span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#39;Error:&#39;</span>, <span style="color:#a6e22e">error</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// testCaching();
</span></span></span></code></pre></div><h2 id="best-practices-cho-promise-v√†-asyncawait">Best Practices cho Promise v√† Async/Await</h2>
<h3 id="1-lu√¥n-x·ª≠-l√Ω-l·ªói">1. Lu√¥n x·ª≠ l√Ω l·ªói</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// T·ªët
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fetchData</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">data</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">apiCall</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">data</span>;
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#39;Error:&#39;</span>, <span style="color:#a6e22e">error</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">throw</span> <span style="color:#a6e22e">error</span>; <span style="color:#75715e">// Re-throw n·∫øu c·∫ßn
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Ho·∫∑c
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">fetchData</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">data</span> =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">data</span>))
</span></span><span style="display:flex;"><span>    .<span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">error</span> =&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#39;Error:&#39;</span>, <span style="color:#a6e22e">error</span>));
</span></span></code></pre></div><h3 id="2-s·ª≠-d·ª•ng-promiseall-cho-c√°c-t√°c-v·ª•-ƒë·ªôc-l·∫≠p">2. S·ª≠ d·ª•ng Promise.all() cho c√°c t√°c v·ª• ƒë·ªôc l·∫≠p</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// T·ªët - ch·∫°y song song
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">user</span>, <span style="color:#a6e22e">posts</span>, <span style="color:#a6e22e">comments</span>] <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> Promise.<span style="color:#a6e22e">all</span>([
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fetchUser</span>(<span style="color:#a6e22e">id</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fetchPosts</span>(<span style="color:#a6e22e">id</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fetchComments</span>(<span style="color:#a6e22e">id</span>)
</span></span><span style="display:flex;"><span>]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Tr√°nh - ch·∫°y tu·∫ßn t·ª±
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">user</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetchUser</span>(<span style="color:#a6e22e">id</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">posts</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetchPosts</span>(<span style="color:#a6e22e">id</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">comments</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetchComments</span>(<span style="color:#a6e22e">id</span>);
</span></span></code></pre></div><h3 id="3-s·ª≠-d·ª•ng-promiserace-cho-timeout">3. S·ª≠ d·ª•ng Promise.race() cho timeout</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fetchWithTimeout</span>(<span style="color:#a6e22e">url</span>, <span style="color:#a6e22e">timeout</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">5000</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">controller</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">AbortController</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">timeoutId</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">setTimeout</span>(() =&gt; <span style="color:#a6e22e">controller</span>.<span style="color:#a6e22e">abort</span>(), <span style="color:#a6e22e">timeout</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">response</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#a6e22e">url</span>, { <span style="color:#a6e22e">signal</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">controller</span>.<span style="color:#a6e22e">signal</span> });
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">clearTimeout</span>(<span style="color:#a6e22e">timeoutId</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">json</span>();
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">clearTimeout</span>(<span style="color:#a6e22e">timeoutId</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">throw</span> <span style="color:#a6e22e">error</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="4-tr√°nh-promise-hell">4. Tr√°nh Promise Hell</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Tr√°nh - Promise Hell
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">fetchUser</span>(<span style="color:#a6e22e">id</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">user</span> =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">fetchPosts</span>(<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">id</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">posts</span> =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">fetchComments</span>(<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">id</span>)
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">comments</span> =&gt; {
</span></span><span style="display:flex;"><span>                        <span style="color:#66d9ef">return</span> { <span style="color:#a6e22e">user</span>, <span style="color:#a6e22e">posts</span>, <span style="color:#a6e22e">comments</span> };
</span></span><span style="display:flex;"><span>                    });
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// T·ªët - Async/Await
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fetchUserData</span>(<span style="color:#a6e22e">id</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">user</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetchUser</span>(<span style="color:#a6e22e">id</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">posts</span>, <span style="color:#a6e22e">comments</span>] <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> Promise.<span style="color:#a6e22e">all</span>([
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">fetchPosts</span>(<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">id</span>),
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">fetchComments</span>(<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">id</span>)
</span></span><span style="display:flex;"><span>    ]);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> { <span style="color:#a6e22e">user</span>, <span style="color:#a6e22e">posts</span>, <span style="color:#a6e22e">comments</span> };
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="k·∫øt-lu·∫≠n">K·∫øt lu·∫≠n</h2>
<p>Promise v√† Async/Await l√† nh·ªØng c√¥ng c·ª• m·∫°nh m·∫Ω ƒë·ªÉ x·ª≠ l√Ω b·∫•t ƒë·ªìng b·ªô trong JavaScript. Ch√∫ng gi√∫p:</p>
<ul>
<li>Vi·∫øt code b·∫•t ƒë·ªìng b·ªô d·ªÖ ƒë·ªçc v√† b·∫£o tr√¨</li>
<li>X·ª≠ l√Ω l·ªói m·ªôt c√°ch hi·ªáu qu·∫£</li>
<li>Th·ª±c hi·ªán nhi·ªÅu t√°c v·ª• song song</li>
<li>T·∫°o ra c√°c pattern ph·ª©c t·∫°p nh∆∞ retry, caching, batch processing</li>
</ul>
<p>H√£y th·ª±c h√†nh nhi·ªÅu v·ªõi c√°c v√≠ d·ª• tr√™n ƒë·ªÉ th√†nh th·∫°o Promise v√† Async/Await!</p>

  </div>

  
  
  <footer class="mt4 pt3 bt b--light-gray">
    <h3 class="f5 b ttu gray mb2">üè∑Ô∏è Tags:</h3>
    <div>
      
        <a href="/tags/promise" 
           class="link dim br-pill ph3 pv1 mh1 bg-light-gray dark-gray">
          promise
        </a>
      
        <a href="/tags/async" 
           class="link dim br-pill ph3 pv1 mh1 bg-light-gray dark-gray">
          async
        </a>
      
        <a href="/tags/await" 
           class="link dim br-pill ph3 pv1 mh1 bg-light-gray dark-gray">
          await
        </a>
      
        <a href="/tags/javascript" 
           class="link dim br-pill ph3 pv1 mh1 bg-light-gray dark-gray">
          javascript
        </a>
      
    </div>
  </footer>
  

  
  <section class="mt5">
    
    
  </section>
</article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white white-70 dn dib-ns pv2 ph3 no-underline" href="https://phuoc0209.github.io/blogphuoc.github.io/" >
    &copy;  Blog Ti·∫øn Ph∆∞·ªõc 2025 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
